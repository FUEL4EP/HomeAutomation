#!/bin/sh

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# addon name                  : hb-ep-devices-addon
# addon version               : 1.8
#
# generated by AsksinPP_addon_generator 0.94
# generated on Wed May 12 15:00:01 CEST 2021

# XML control file name       : AsksinPP_addon_generator_control_file.xml

# creator                     : ewald
# created_on                  : 2021_05_12-14:58:15
# extract_rftypes_XML version : 0.13
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# global settings for editing DEVDB.tcl
devdescrFile="/www/config/devdescr/DEVDB.tcl"
devdescrSearch="array[[:space:]]*set[[:space:]]*DEV_PATHS[[:space:]]*{"

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# global settings for editing webui.js
webuiFile="/www/webui/webui.js"
webuiSearch="DEV_HIGHLIGHT[[:space:]]*=[[:space:]]*new Array();"


#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# iterate over the addon devices
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# device name            : HB-UNI-SENSOR-AQ-BME680_KF_DEBUG
# small case device name : hb-uni-sensor-AQ-BME680_KF_DEBUG
# XML version            : 0x10
# index                  : 0
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# in der WebUI angezeigter Gerätetyp, muss identisch sein mit dem Firmware-XML-Tag: <type name="HB-UNI-SENSOR-AQ-BME680_KF_DEBUG" id="HB-UNI-SENSOR-AQ-BME680_KF_DEBUG">
DEVICE="HB-UNI-SENSOR-AQ-BME680_KF_DEBUG"
# in der WebUI angezeigte Gerätebeschreibung
DEVICE_DESC="universeller Luftg\&uuml;tesensor mit Kalman Filter (Debug Version)"
# Name der Piktogramme, bestehend aus xx.png bzw. xx_thumb.png
DEVICE_IMG=hb-uni-sensor-AQ-BME680_KF_DEBUG.png
DEVICE_THUMB=hb-uni-sensor-AQ-BME680_KF_DEBUG_thumb.png
FIRMWARE_FILE=/firmware/rftypes/hb-uni-sensor-AQ-BME680_KF_DEBUG*.xml

#------------------------------------------------------------------------------
# Undo DEVDB.tcl changes
devdescrSearch="$DEVICE {{50 \/config\/img\/devices\/50\/$DEVICE_THUMB} {250 \/config\/img\/devices\/250\/$DEVICE_IMG}} "

if [ "`cat $devdescrFile | grep \"$DEVICE\"`" ]; then
        sed -i "s/\($devdescrSearch\)//g" $devdescrFile
fi

#------------------------------------------------------------------------------
# Undo webui.js changes
if [ "`cat $webuiFile | grep \"$DEVICE\"`" ]; then
        sed -i "/\($DEVICE\)/d" $webuiFile
fi

#------------------------------------------------------------------------------
# remove device_xml links
rm -f $FIRMWARE_FILE

#------------------------------------------------------------------------------
# remove thumb files
rm -f /www/config/img/devices/250/$DEVICE_IMG
rm -f /www/config/img/devices/50/$DEVICE_THUMB

#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
# ab hier siehe Anleitung von Jérôme, siehe https://homematic-forum.de/forum/viewtopic.php?f=76&t=60067
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------
#------------------------------------------------------------------------------





### Undo changes of webuiFile ####

 

# parameter id #1: TRANSMIT_TIME_INTERVAL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
webuiSearch="TRANSMIT_TIME_INTERVAL"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #2: ALTITUDE_ABOVE_SEA_LEVEL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
webuiSearch="ALTITUDE_ABOVE_SEA_LEVEL"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #3: WEATHER|TemperatureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
webuiSearch="WEATHER|TemperatureOffset"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #4: WEATHER|HumidityOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
webuiSearch="WEATHER|HumidityOffset"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #5: WEATHER|PressureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
webuiSearch="WEATHER|PressureOffset"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #6: WEATHER|max_decay_factor_upper_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
webuiSearch="WEATHER|max_decay_factor_upper_limit"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #7: WEATHER|max_increase_factor_lower_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
webuiSearch="WEATHER|max_increase_factor_lower_limit"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #8: WEATHER|AQ_LEVEL paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_LEVEL"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #9: WEATHER|AQ_LOG10 paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_LOG10"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #10: WEATHER|AQ_COMP_GAS_RES_RAW paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_COMP_GAS_RES_RAW"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #11: WEATHER|AQ_COMP_GAS_RES_MIN paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_COMP_GAS_RES_MIN"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #12: WEATHER|AQ_COMP_GAS_RES_MAX paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_COMP_GAS_RES_MAX"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #13: WEATHER|AQ_ALPHA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_ALPHA"
sed -i "/\($webuiSearch\)/d" $webuiFile

 

# parameter id #14: WEATHER|AQ_BETA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
webuiSearch="WEATHER|AQ_BETA"
sed -i "/\($webuiSearch\)/d" $webuiFile




### Undo changes of stringtable_de.txt ###

stringtable_deFile="/www/config/stringtable_de.txt"
 

# parameter id #1: TRANSMIT_TIME_INTERVAL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
stringtable_deSearch="TRANSMIT_TIME_INTERVAL"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #2: ALTITUDE_ABOVE_SEA_LEVEL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
stringtable_deSearch="ALTITUDE_ABOVE_SEA_LEVEL"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #3: WEATHER|TemperatureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
stringtable_deSearch="WEATHER|TemperatureOffset"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #4: WEATHER|HumidityOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
stringtable_deSearch="WEATHER|HumidityOffset"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #5: WEATHER|PressureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
stringtable_deSearch="WEATHER|PressureOffset"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #6: WEATHER|max_decay_factor_upper_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
stringtable_deSearch="WEATHER|max_decay_factor_upper_limit"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #7: WEATHER|max_increase_factor_lower_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
stringtable_deSearch="WEATHER|max_increase_factor_lower_limit"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #8: WEATHER|AQ_LEVEL paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_LEVEL"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #9: WEATHER|AQ_LOG10 paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_LOG10"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #10: WEATHER|AQ_COMP_GAS_RES_RAW paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_COMP_GAS_RES_RAW"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #11: WEATHER|AQ_COMP_GAS_RES_MIN paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_COMP_GAS_RES_MIN"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #12: WEATHER|AQ_COMP_GAS_RES_MAX paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_COMP_GAS_RES_MAX"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #13: WEATHER|AQ_ALPHA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_ALPHA"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile
 

# parameter id #14: WEATHER|AQ_BETA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
stringtable_deSearch="WEATHER|AQ_BETA"
sed -i "/\($stringtable_deSearch\)/d" $stringtable_deFile



### Undo changes of translate.lang.stringtable.js ###

translate_deFile="/www/webui/js/lang/de/translate.lang.stringtable.js"
 

# parameter id #1: TRANSMIT_TIME_INTERVAL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
translate_deSearch="stringTableHB_F6_TRANSMIT_TIME_INTERVAL"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #2: ALTITUDE_ABOVE_SEA_LEVEL paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_dev_master 
 
translate_deSearch="stringTableHB_F6_ALTITUDE_ABOVE_SEA_LEVEL"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #3: WEATHER|TemperatureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
translate_deSearch="stringTableHB_F6_TemperatureOffset"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #4: WEATHER|HumidityOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
translate_deSearch="stringTableHB_F6_HumidityOffset"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #5: WEATHER|PressureOffset paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
translate_deSearch="stringTableHB_F6_PressureOffset"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #6: WEATHER|max_decay_factor_upper_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
translate_deSearch="stringTableHB_F6_max_decay_factor_upper_limit"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #7: WEATHER|max_increase_factor_lower_limit paramset MASTER HB-UNI-Sensor-AQ-BME680_KF_DEBUG_master channel WEATHER 
 
translate_deSearch="stringTableHB_F6_max_increase_factor_lower_limit"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #8: WEATHER|AQ_LEVEL paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_LEVEL"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #9: WEATHER|AQ_LOG10 paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_LOG10"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #10: WEATHER|AQ_COMP_GAS_RES_RAW paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_COMP_GAS_RES_RAW"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #11: WEATHER|AQ_COMP_GAS_RES_MIN paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_COMP_GAS_RES_MIN"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #12: WEATHER|AQ_COMP_GAS_RES_MAX paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_COMP_GAS_RES_MAX"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #13: WEATHER|AQ_ALPHA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_ALPHA"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile
 

# parameter id #14: WEATHER|AQ_BETA paramset VALUES HB-UNI-Sensor-AQ-BME680_KF_DEBUG_values channel WEATHER 
 
translate_deSearch="stringTableHB_F6_AQ_BETA"
sed -i "/\(${translate_deSearch}\)/d" $translate_deFile


#finished 'AsksinPP addon script generator 0.94'
